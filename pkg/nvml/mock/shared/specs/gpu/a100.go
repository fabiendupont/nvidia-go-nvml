/*
 * Copyright (c) 2025, NVIDIA CORPORATION.  All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package gpu

import (
	"github.com/NVIDIA/go-nvml/pkg/nvml"
	"github.com/NVIDIA/go-nvml/pkg/nvml/mock/shared"
)

// A100Spec defines the GPU specification for NVIDIA A100-SXM4-40GB
var A100Spec = shared.GPUSpec{
	Name:                "NVIDIA A100-SXM4-40GB",
	Architecture:        nvml.DEVICE_ARCH_AMPERE,
	Brand:               nvml.BRAND_TESLA,
	PciDeviceId:         shared.A100_PCI_DEVICE_ID,
	PciBusIDBase:        "0000:%02x:00.0", // A100 uses bus 0x00-0x07
	DriverVersion:       shared.DEFAULT_DRIVER_VERSION,
	NvmlVersion:         shared.DEFAULT_NVML_VERSION,
	CudaDriverVersion:   shared.DEFAULT_CUDA_DRIVER_VERSION,
	CudaCapabilityMajor: shared.A100_CUDA_MAJOR,
	CudaCapabilityMinor: shared.A100_CUDA_MINOR,
	TotalMemoryMB:       shared.A100_TOTAL_MEMORY_MB,
	MIGProfiles:         A100MIGProfiles,
}

// A100MIGProfiles defines the complete MIG profile configuration for A100
var A100MIGProfiles = shared.MIGProfileConfig{
	GpuInstanceProfiles: map[int]nvml.GpuInstanceProfileInfo{
		nvml.GPU_INSTANCE_PROFILE_1_SLICE: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_1_SLICE,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          1,
			InstanceCount:       shared.MIG_1_SLICE_INSTANCE_COUNT,
			MultiprocessorCount: shared.MIG_1_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_1_SLICE_CE_COUNT,
			DecoderCount:        0,
			EncoderCount:        0,
			JpegCount:           0,
			OfaCount:            0,
			MemorySizeMB:        shared.A100_MIG_1G_5GB_MEMORY_MB,
		},
		nvml.GPU_INSTANCE_PROFILE_1_SLICE_REV1: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_1_SLICE_REV1,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          1,
			InstanceCount:       1,
			MultiprocessorCount: shared.MIG_1_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_1_SLICE_CE_COUNT,
			DecoderCount:        1,
			EncoderCount:        0,
			JpegCount:           1,
			OfaCount:            1,
			MemorySizeMB:        shared.A100_MIG_1G_5GB_MEMORY_MB,
		},
		nvml.GPU_INSTANCE_PROFILE_1_SLICE_REV2: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_1_SLICE_REV2,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          1,
			InstanceCount:       4,
			MultiprocessorCount: shared.MIG_1_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_1_SLICE_CE_COUNT,
			DecoderCount:        1,
			EncoderCount:        0,
			JpegCount:           0,
			OfaCount:            0,
			MemorySizeMB:        shared.A100_MIG_2G_10GB_MEMORY_MB,
		},
		nvml.GPU_INSTANCE_PROFILE_2_SLICE: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_2_SLICE,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          2,
			InstanceCount:       shared.MIG_2_SLICE_INSTANCE_COUNT,
			MultiprocessorCount: shared.MIG_2_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_2_SLICE_CE_COUNT,
			DecoderCount:        1,
			EncoderCount:        0,
			JpegCount:           0,
			OfaCount:            0,
			MemorySizeMB:        shared.A100_MIG_2G_10GB_MEMORY_MB,
		},
		nvml.GPU_INSTANCE_PROFILE_2_SLICE_REV1: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_2_SLICE_REV1,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          2,
			InstanceCount:       2,
			MultiprocessorCount: shared.MIG_2_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_2_SLICE_CE_COUNT,
			DecoderCount:        2,
			EncoderCount:        1,
			JpegCount:           0,
			OfaCount:            0,
			MemorySizeMB:        shared.A100_MIG_2G_REV1_MEMORY_MB,
		},
		nvml.GPU_INSTANCE_PROFILE_3_SLICE: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_3_SLICE,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          3,
			InstanceCount:       shared.MIG_3_SLICE_INSTANCE_COUNT,
			MultiprocessorCount: shared.MIG_3_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_3_SLICE_CE_COUNT,
			DecoderCount:        2,
			EncoderCount:        0,
			JpegCount:           0,
			OfaCount:            0,
			MemorySizeMB:        shared.A100_MIG_3G_20GB_MEMORY_MB,
		},
		nvml.GPU_INSTANCE_PROFILE_4_SLICE: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_4_SLICE,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          4,
			InstanceCount:       shared.MIG_4_SLICE_INSTANCE_COUNT,
			MultiprocessorCount: shared.MIG_4_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_4_SLICE_CE_COUNT,
			DecoderCount:        2,
			EncoderCount:        0,
			JpegCount:           0,
			OfaCount:            0,
			MemorySizeMB:        shared.A100_MIG_4G_20GB_MEMORY_MB,
		},
		nvml.GPU_INSTANCE_PROFILE_7_SLICE: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_7_SLICE,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          7,
			InstanceCount:       shared.MIG_7_SLICE_INSTANCE_COUNT,
			MultiprocessorCount: shared.MIG_7_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_7_SLICE_CE_COUNT,
			DecoderCount:        5,
			EncoderCount:        0,
			JpegCount:           1,
			OfaCount:            1,
			MemorySizeMB:        shared.A100_MIG_7G_40GB_MEMORY_MB,
		},
		// Additional profiles for comprehensive coverage (matching H100/H200 structure)
		nvml.GPU_INSTANCE_PROFILE_6_SLICE: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_6_SLICE,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          6,
			InstanceCount:       1,
			MultiprocessorCount: 84, // A100 has fewer SMs than H100, approximate 6/7 of 98
			CopyEngineCount:     6,
			DecoderCount:        4,
			EncoderCount:        3,
			JpegCount:           1,
			OfaCount:            1,
			MemorySizeMB:        shared.A100_MIG_7G_40GB_MEMORY_MB, // Same as 7-slice for A100
		},
		nvml.GPU_INSTANCE_PROFILE_8_SLICE: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_8_SLICE,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          8,
			InstanceCount:       1,
			MultiprocessorCount: shared.MIG_7_SLICE_SM_COUNT, // Same as 7-slice for A100
			CopyEngineCount:     shared.MIG_7_SLICE_CE_COUNT,
			DecoderCount:        5,
			EncoderCount:        0,
			JpegCount:           1,
			OfaCount:            1,
			MemorySizeMB:        shared.A100_MIG_7G_40GB_MEMORY_MB, // Same as 7-slice for A100
		},
		// Graphics variants
		nvml.GPU_INSTANCE_PROFILE_1_SLICE_GFX: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_1_SLICE_GFX,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          1,
			InstanceCount:       shared.MIG_1_SLICE_INSTANCE_COUNT,
			MultiprocessorCount: shared.MIG_1_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_1_SLICE_CE_COUNT,
			DecoderCount:        1,
			EncoderCount:        1,
			JpegCount:           1,
			OfaCount:            1,
			MemorySizeMB:        shared.A100_MIG_1G_GFX_MEMORY_MB,
		},
		nvml.GPU_INSTANCE_PROFILE_2_SLICE_GFX: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_2_SLICE_GFX,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          2,
			InstanceCount:       shared.MIG_2_SLICE_INSTANCE_COUNT,
			MultiprocessorCount: shared.MIG_2_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_2_SLICE_CE_COUNT,
			DecoderCount:        2,
			EncoderCount:        2,
			JpegCount:           1,
			OfaCount:            1,
			MemorySizeMB:        shared.A100_MIG_2G_GFX_MEMORY_MB,
		},
		nvml.GPU_INSTANCE_PROFILE_4_SLICE_GFX: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_4_SLICE_GFX,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          4,
			InstanceCount:       shared.MIG_4_SLICE_INSTANCE_COUNT,
			MultiprocessorCount: shared.MIG_4_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_4_SLICE_CE_COUNT,
			DecoderCount:        4,
			EncoderCount:        4,
			JpegCount:           1,
			OfaCount:            1,
			MemorySizeMB:        shared.A100_MIG_4G_GFX_MEMORY_MB,
		},
		// Memory engine variants
		nvml.GPU_INSTANCE_PROFILE_1_SLICE_NO_ME: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_1_SLICE_NO_ME,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          1,
			InstanceCount:       shared.MIG_1_SLICE_INSTANCE_COUNT,
			MultiprocessorCount: shared.MIG_1_SLICE_SM_COUNT,
			CopyEngineCount:     0, // No memory engines
			DecoderCount:        0,
			EncoderCount:        0,
			JpegCount:           0,
			OfaCount:            0,
			MemorySizeMB:        shared.A100_MIG_1G_NO_ME_MEMORY_MB,
		},
		nvml.GPU_INSTANCE_PROFILE_2_SLICE_NO_ME: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_2_SLICE_NO_ME,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          2,
			InstanceCount:       shared.MIG_2_SLICE_INSTANCE_COUNT,
			MultiprocessorCount: shared.MIG_2_SLICE_SM_COUNT,
			CopyEngineCount:     0, // No memory engines
			DecoderCount:        0,
			EncoderCount:        0,
			JpegCount:           0,
			OfaCount:            0,
			MemorySizeMB:        shared.A100_MIG_2G_NO_ME_MEMORY_MB,
		},
		nvml.GPU_INSTANCE_PROFILE_1_SLICE_ALL_ME: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_1_SLICE_ALL_ME,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          1,
			InstanceCount:       shared.MIG_1_SLICE_INSTANCE_COUNT,
			MultiprocessorCount: shared.MIG_1_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_1_SLICE_CE_COUNT * 2, // All memory engines
			DecoderCount:        2,
			EncoderCount:        2,
			JpegCount:           1,
			OfaCount:            1,
			MemorySizeMB:        shared.A100_MIG_1G_ALL_ME_MEMORY_MB,
		},
		nvml.GPU_INSTANCE_PROFILE_2_SLICE_ALL_ME: {
			Id:                  nvml.GPU_INSTANCE_PROFILE_2_SLICE_ALL_ME,
			IsP2pSupported:      shared.A100_MIG_P2P_SUPPORT,
			SliceCount:          2,
			InstanceCount:       shared.MIG_2_SLICE_INSTANCE_COUNT,
			MultiprocessorCount: shared.MIG_2_SLICE_SM_COUNT,
			CopyEngineCount:     shared.MIG_2_SLICE_CE_COUNT * 2, // All memory engines
			DecoderCount:        4,
			EncoderCount:        4,
			JpegCount:           1,
			OfaCount:            1,
			MemorySizeMB:        shared.A100_MIG_2G_ALL_ME_MEMORY_MB,
		},
	},
	ComputeInstanceProfiles: map[int]map[int]nvml.ComputeInstanceProfileInfo{
		nvml.GPU_INSTANCE_PROFILE_1_SLICE: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE,
				SliceCount:            1,
				InstanceCount:         1,
				MultiprocessorCount:   shared.MIG_1_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_1_SLICE_CE_COUNT,
				SharedDecoderCount:    0,
				SharedEncoderCount:    0,
				SharedJpegCount:       0,
				SharedOfaCount:        0,
			},
		},
		nvml.GPU_INSTANCE_PROFILE_1_SLICE_REV1: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE,
				SliceCount:            1,
				InstanceCount:         1,
				MultiprocessorCount:   shared.MIG_1_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_1_SLICE_CE_COUNT,
				SharedDecoderCount:    1,
				SharedEncoderCount:    0,
				SharedJpegCount:       1,
				SharedOfaCount:        1,
			},
		},
		nvml.GPU_INSTANCE_PROFILE_1_SLICE_REV2: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE,
				SliceCount:            1,
				InstanceCount:         1,
				MultiprocessorCount:   shared.MIG_1_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_1_SLICE_CE_COUNT,
				SharedDecoderCount:    1,
				SharedEncoderCount:    0,
				SharedJpegCount:       0,
				SharedOfaCount:        0,
			},
		},
		nvml.GPU_INSTANCE_PROFILE_2_SLICE: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE,
				SliceCount:            1,
				InstanceCount:         2,
				MultiprocessorCount:   shared.MIG_1_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_2_SLICE_CE_COUNT,
				SharedDecoderCount:    1,
				SharedEncoderCount:    0,
				SharedJpegCount:       0,
				SharedOfaCount:        0,
			},
			nvml.COMPUTE_INSTANCE_PROFILE_2_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_2_SLICE,
				SliceCount:            2,
				InstanceCount:         1,
				MultiprocessorCount:   shared.MIG_2_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_2_SLICE_CE_COUNT,
				SharedDecoderCount:    1,
				SharedEncoderCount:    0,
				SharedJpegCount:       0,
				SharedOfaCount:        0,
			},
		},
		nvml.GPU_INSTANCE_PROFILE_3_SLICE: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE,
				SliceCount:            1,
				InstanceCount:         3,
				MultiprocessorCount:   shared.MIG_1_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_3_SLICE_CE_COUNT,
				SharedDecoderCount:    2,
				SharedEncoderCount:    0,
				SharedJpegCount:       0,
				SharedOfaCount:        0,
			},
			nvml.COMPUTE_INSTANCE_PROFILE_3_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_3_SLICE,
				SliceCount:            3,
				InstanceCount:         1,
				MultiprocessorCount:   shared.MIG_3_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_3_SLICE_CE_COUNT,
				SharedDecoderCount:    2,
				SharedEncoderCount:    0,
				SharedJpegCount:       0,
				SharedOfaCount:        0,
			},
		},
		nvml.GPU_INSTANCE_PROFILE_4_SLICE: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE,
				SliceCount:            1,
				InstanceCount:         4,
				MultiprocessorCount:   shared.MIG_1_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_4_SLICE_CE_COUNT,
				SharedDecoderCount:    2,
				SharedEncoderCount:    0,
				SharedJpegCount:       0,
				SharedOfaCount:        0,
			},
			nvml.COMPUTE_INSTANCE_PROFILE_2_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_2_SLICE,
				SliceCount:            2,
				InstanceCount:         2,
				MultiprocessorCount:   shared.MIG_2_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_4_SLICE_CE_COUNT,
				SharedDecoderCount:    2,
				SharedEncoderCount:    0,
				SharedJpegCount:       0,
				SharedOfaCount:        0,
			},
			nvml.COMPUTE_INSTANCE_PROFILE_4_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_4_SLICE,
				SliceCount:            4,
				InstanceCount:         1,
				MultiprocessorCount:   shared.MIG_4_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_4_SLICE_CE_COUNT,
				SharedDecoderCount:    2,
				SharedEncoderCount:    0,
				SharedJpegCount:       0,
				SharedOfaCount:        0,
			},
		},
		nvml.GPU_INSTANCE_PROFILE_7_SLICE: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE,
				SliceCount:            1,
				InstanceCount:         7,
				MultiprocessorCount:   shared.MIG_1_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_7_SLICE_CE_COUNT,
				SharedDecoderCount:    5,
				SharedEncoderCount:    0,
				SharedJpegCount:       1,
				SharedOfaCount:        1,
			},
			nvml.COMPUTE_INSTANCE_PROFILE_2_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_2_SLICE,
				SliceCount:            2,
				InstanceCount:         3,
				MultiprocessorCount:   shared.MIG_2_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_7_SLICE_CE_COUNT,
				SharedDecoderCount:    5,
				SharedEncoderCount:    0,
				SharedJpegCount:       1,
				SharedOfaCount:        1,
			},
			nvml.COMPUTE_INSTANCE_PROFILE_3_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_3_SLICE,
				SliceCount:            3,
				InstanceCount:         2,
				MultiprocessorCount:   shared.MIG_3_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_7_SLICE_CE_COUNT,
				SharedDecoderCount:    5,
				SharedEncoderCount:    0,
				SharedJpegCount:       1,
				SharedOfaCount:        1,
			},
			nvml.COMPUTE_INSTANCE_PROFILE_4_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_4_SLICE,
				SliceCount:            4,
				InstanceCount:         1,
				MultiprocessorCount:   shared.MIG_4_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_7_SLICE_CE_COUNT,
				SharedDecoderCount:    5,
				SharedEncoderCount:    0,
				SharedJpegCount:       1,
				SharedOfaCount:        1,
			},
			nvml.COMPUTE_INSTANCE_PROFILE_7_SLICE: {
				Id:                    nvml.COMPUTE_INSTANCE_PROFILE_7_SLICE,
				SliceCount:            7,
				InstanceCount:         1,
				MultiprocessorCount:   shared.MIG_7_SLICE_SM_COUNT,
				SharedCopyEngineCount: shared.MIG_7_SLICE_CE_COUNT,
				SharedDecoderCount:    5,
				SharedEncoderCount:    0,
				SharedJpegCount:       1,
				SharedOfaCount:        1,
			},
		},
	},
	GpuInstancePlacements: map[int][]nvml.GpuInstancePlacement{
		nvml.GPU_INSTANCE_PROFILE_1_SLICE: {
			{Start: 0, Size: 1}, {Start: 1, Size: 1}, {Start: 2, Size: 1}, {Start: 3, Size: 1},
			{Start: 4, Size: 1}, {Start: 5, Size: 1}, {Start: 6, Size: 1},
		},
		nvml.GPU_INSTANCE_PROFILE_1_SLICE_REV1: {
			{Start: 0, Size: 1}, {Start: 1, Size: 1}, {Start: 2, Size: 1}, {Start: 3, Size: 1},
			{Start: 4, Size: 1}, {Start: 5, Size: 1}, {Start: 6, Size: 1},
		},
		nvml.GPU_INSTANCE_PROFILE_1_SLICE_REV2: {
			{Start: 0, Size: 2}, {Start: 2, Size: 2}, {Start: 4, Size: 2}, {Start: 6, Size: 2},
		},
		nvml.GPU_INSTANCE_PROFILE_2_SLICE: {
			{Start: 0, Size: 2}, {Start: 2, Size: 2}, {Start: 4, Size: 2},
		},
		nvml.GPU_INSTANCE_PROFILE_3_SLICE: {
			{Start: 0, Size: 4}, {Start: 4, Size: 4},
		},
		nvml.GPU_INSTANCE_PROFILE_4_SLICE: {
			{Start: 0, Size: 4},
		},
		nvml.GPU_INSTANCE_PROFILE_7_SLICE: {
			{Start: 0, Size: 8},
		},
	},
	ComputeInstancePlacements: map[int]map[int][]nvml.ComputeInstancePlacement{
		nvml.GPU_INSTANCE_PROFILE_1_SLICE: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {{Start: 0, Size: 1}},
		},
		nvml.GPU_INSTANCE_PROFILE_1_SLICE_REV1: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {{Start: 0, Size: 1}},
		},
		nvml.GPU_INSTANCE_PROFILE_1_SLICE_REV2: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {{Start: 0, Size: 1}},
		},
		nvml.GPU_INSTANCE_PROFILE_2_SLICE: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {{Start: 0, Size: 1}, {Start: 1, Size: 1}},
			nvml.COMPUTE_INSTANCE_PROFILE_2_SLICE: {{Start: 0, Size: 2}},
		},
		nvml.GPU_INSTANCE_PROFILE_3_SLICE: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {{Start: 0, Size: 1}, {Start: 1, Size: 1}, {Start: 2, Size: 1}},
			nvml.COMPUTE_INSTANCE_PROFILE_2_SLICE: {{Start: 0, Size: 2}},
			nvml.COMPUTE_INSTANCE_PROFILE_3_SLICE: {{Start: 0, Size: 3}},
		},
		nvml.GPU_INSTANCE_PROFILE_4_SLICE: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {{Start: 0, Size: 1}, {Start: 1, Size: 1}, {Start: 2, Size: 1}, {Start: 3, Size: 1}},
			nvml.COMPUTE_INSTANCE_PROFILE_2_SLICE: {{Start: 0, Size: 2}, {Start: 2, Size: 2}},
			nvml.COMPUTE_INSTANCE_PROFILE_4_SLICE: {{Start: 0, Size: 4}},
		},
		nvml.GPU_INSTANCE_PROFILE_7_SLICE: {
			nvml.COMPUTE_INSTANCE_PROFILE_1_SLICE: {
				{Start: 0, Size: 1}, {Start: 1, Size: 1}, {Start: 2, Size: 1}, {Start: 3, Size: 1},
				{Start: 4, Size: 1}, {Start: 5, Size: 1}, {Start: 6, Size: 1},
			},
			nvml.COMPUTE_INSTANCE_PROFILE_2_SLICE: {{Start: 0, Size: 2}, {Start: 2, Size: 2}, {Start: 4, Size: 2}},
			nvml.COMPUTE_INSTANCE_PROFILE_3_SLICE: {{Start: 0, Size: 3}, {Start: 4, Size: 3}},
			nvml.COMPUTE_INSTANCE_PROFILE_4_SLICE: {{Start: 0, Size: 4}},
			nvml.COMPUTE_INSTANCE_PROFILE_7_SLICE: {{Start: 0, Size: 8}},
		},
	},
}
